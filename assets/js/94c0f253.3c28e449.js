"use strict";(self.webpackChunkosmosis_docs=self.webpackChunkosmosis_docs||[]).push([[603],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>d});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var r=a.createContext({}),u=function(e){var n=a.useContext(r),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(r.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=u(t),d=o,k=m["".concat(r,".").concat(d)]||m[d]||p[d]||i;return t?a.createElement(k,s(s({ref:n},c),{},{components:t})):a.createElement(k,s({ref:n},c))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,s=new Array(i);s[0]=m;var l={};for(var r in n)hasOwnProperty.call(n,r)&&(l[r]=n[r]);l.originalType=e,l.mdxType="string"==typeof e?e:o,s[1]=l;for(var u=2;u<i;u++)s[u]=t[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},92596:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=t(87462),o=(t(67294),t(3905));const i={},s="Transaction Structure",l={unversionedId:"guides/structure/README",id:"guides/structure/README",title:"Transaction Structure",description:"Each block on a blockchain, including Cosmos-based ones like Osmosis, are constructed of a series",source:"@site/docs/osmosis-core/guides/structure/README.md",sourceDirName:"guides/structure",slug:"/guides/structure/",permalink:"/osmosis-core/guides/structure/",draft:!1,editUrl:"https://github.com/osmosis-labs/docs/tree/main/docs/osmosis-core/guides/structure/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Performance and Profiling",permalink:"/osmosis-core/guides/performance"},next:{title:"Arbitrage",permalink:"/osmosis-core/guides/structure/arb"}},r={},u=[{value:"Retrieving a block",id:"retrieving-a-block",level:2},{value:"tx",id:"tx",level:2},{value:"signer",id:"signer",level:3},{value:"body",id:"body",level:3},{value:"logs",id:"logs",level:3}],c={toc:u};function p(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"transaction-structure"},"Transaction Structure"),(0,o.kt)("p",null,"Each block on a blockchain, including Cosmos-based ones like Osmosis, are constructed of a series\nof transactions."),(0,o.kt)("p",null,"Each transaction, in turn, has its own internal structure. This document describes the structure\nof those transactions."),(0,o.kt)("h2",{id:"retrieving-a-block"},"Retrieving a block"),(0,o.kt)("p",null,"You can retrieve a single block by any one of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"using the RPC API"),(0,o.kt)("li",{parentName:"ul"},"using the REST API"),(0,o.kt)("li",{parentName:"ul"},"running a full node (using ",(0,o.kt)("inlineCode",{parentName:"li"},"osmosisd"),")")),(0,o.kt)("p",null,"For our examples, we use ",(0,o.kt)("inlineCode",{parentName:"p"},"osmosisd")," to retrieve a single block:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query block 2836990\n")),(0,o.kt)("p",null,"The above retrieves the block ",(0,o.kt)("inlineCode",{parentName:"p"},"2836990"),". The result generally is in json without any formatting,\nso we run it through ",(0,o.kt)("inlineCode",{parentName:"p"},"jq")," to clean it up:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query block 2836990 | jq '.'\n")),(0,o.kt)("p",null,"The result is a large json file. To keep this document readable, we will not reproduce the whole thing here,\nonly its structure. The entire file is available at ",(0,o.kt)("a",{parentName:"p",href:"/osmosis-core/guides/structure/block-2836990"},"block-2836990.json"),"."),(0,o.kt)("p",null,"The main outline is as follows:"),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Outline"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "block_id": {\n    "hash": "CC3F7B8C711393E0A6BF42F743C1E96A5E147C03CD2ACF50E15DF93515E4DCC5",\n    "parts": {\n      "total": 2,\n      "hash": "EB26807B983730D1B87D821D4A7E8BFDC83E78CDB4E5B89DD5A28C78CAE1931E"\n    }\n  },\n  "block": {\n    "header": {\n      "version": {\n        "block": "11",\n        "app": "1"\n      },\n      "chain_id": "osmosis-1",\n      "height": "2836990",\n      "time": "2022-01-17T17:14:01.589129908Z",\n      "last_block_id": {\n        "hash": "10419816E363D36492987AA2FBC1F09653DB026B2A6787F01B69C98EA54ADAEF",\n        "parts": {\n          "total": 3,\n          "hash": "468EAE52F145F55319BD41B6A62629E2424CF53B91D7AE28BD7E2C07D9B2F7B3"\n        }\n      },\n      "last_commit_hash": "D17D43C66F440B7B0FD23D085A195B839D022D8365B318B27484DACACC718F30",\n      "data_hash": "4C5F9C3A26A245945D5F6C7BB3854C2A8E8A2A54C3459DA135E93C5A5F916D6F",\n      "validators_hash": "6CE355CD08D5B5C775845B87F04C295E6F35FA6FD5353DA668482406B7360F45",\n      "next_validators_hash": "DE379515F7B35ABB57E5FECA27EB485731058EE045F26DE8AB9C8555B3FFD83D",\n      "consensus_hash": "A967D55FACBBA19AB96149048F2476C4657EC03D25B78A81AF5B8F0A08F61DFF",\n      "app_hash": "7356565B67989D373662FC5553E97A206BB8A58385FF42698F1A411C698555F3",\n      "last_results_hash": "DE3F62111363F655A6596B6DE8E1348FF46FE9A7859F695CCE59E4EA0F98253F",\n      "evidence_hash": "E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",\n      "proposer_address": "1B002B6EBEB8653C721301B1B56472B1B4DE7247"\n    },\n    "data": {\n      "txs": [\n        "Cp0CCpoCCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S6wEKK29zbW8xZTBkbXpkeGRtcnd5ZjQ2bmNtNXNxY2xrZGFuM21hcTVrNWp2ZHgSSQjcBBJEaWJjLzk4N0MxN0IxMUFCQzJCMjAwMTkxNzhBQ0U2MjkyOUZFOTg0MDIwMkNFNzk0OThFMjlGRThFNUNCMDJCN0MwQTQSSQjjBBJEaWJjLzI3Mzk0RkIwOTJEMkVDQ0Q1NjEyM0M3NEYzNkU0QzFGOTI2MDAxQ0VBREE5Q0E5N0VBNjIyQjI1RjQxRTVFQjISCQgBEgV1b3NtbxoRCgV1b3NtbxIIMTUwMDAwMDAiCDE1MDAwMDAwEmYKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQI3Vc8hzNbQdpBrbHj8hELzzBskwVqQrad15VgsFn1RtBIECgIIARi+9AMSEAoKCgV1b3NtbxIBMBCAiXoaQD9uPzOcom2NJGzrHEkgytg585ybULi93PnLNKMsECGCNH5gH46Cmiv504ULlyMsTfiyYInMGo39jYIahbDcDLk=",\n        "Cp0CCpoCCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S6wEKK29zbW8xbDR1NTZsN2N2eDhuMG42Yzd3NjUwazAydno2N3F1ZGpsY3V0ODkSSQjcBBJEaWJjLzk4N0MxN0IxMUFCQzJCMjAwMTkxNzhBQ0U2MjkyOUZFOTg0MDIwMkNFNzk0OThFMjlGRThFNUNCMDJCN0MwQTQSSQjjBBJEaWJjLzI3Mzk0RkIwOTJEMkVDQ0Q1NjEyM0M3NEYzNkU0QzFGOTI2MDAxQ0VBREE5Q0E5N0VBNjIyQjI1RjQxRTVFQjISCQgBEgV1b3NtbxoRCgV1b3NtbxIIMTUwMDAwMDAiCDE1MDAwMDAwEmYKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQK1cR2MtFWdtiyO/qORycJYvhuEqF1W9howno2FFP/11xIECgIIARjM8wMSEAoKCgV1b3NtbxIBMBCAiXoaQHCrHmPW89D7BdROgVeDs0Uz4jz95MW/abhLOrsOT/fdS6UQ+Qvzj+htQe7TtKYGRfuK9UsyjcV6gIN7I8K0fbQ=",\n        "CpsCCpgCCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S6QEKK29zbW8xZTBkbXpkeGRtcnd5ZjQ2bmNtNXNxY2xrZGFuM21hcTVrNWp2ZHgSSQjcBBJEaWJjLzk4N0MxN0IxMUFCQzJCMjAwMTkxNzhBQ0U2MjkyOUZFOTg0MDIwMkNFNzk0OThFMjlGRThFNUNCMDJCN0MwQTQSSQjjBBJEaWJjLzI3Mzk0RkIwOTJEMkVDQ0Q1NjEyM0M3NEYzNkU0QzFGOTI2MDAxQ0VBREE5Q0E5N0VBNjIyQjI1RjQxRTVFQjISCQgBEgV1b3NtbxoQCgV1b3NtbxIHMTUwMDAwMCIHMTUwMDAwMBJmClIKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECN1XPIczW0HaQa2x4/IRC88wbJMFakK2ndeVYLBZ9UbQSBAoCCAEYv/QDEhAKCgoFdW9zbW8SATAQgIl6GkD7MtpJPRKqLCvv6b+1LXPjwq+tx/dk5qZDh9AIFbGdDDTptSLBuId7tzXeIqf9hXt6UqOzxbU/OrMAJ/LvOnEY",\n        "Cu8DCuwDCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4SvQMKK29zbW8xMDI2anQycjl5ZnhtbmMzcm12cDBoZ2VlOWd3a215azl1M2t0aHESSQjQAxJEaWJjLzFEQzQ5NUZDRUZEQTA2OEEzODIwRjkwM0VEQkQ3OEI5NDJGQkQyMDREN0U5M0QzQkEyQjQzMkU5NjY5RDFBNTkSSQjNAxJEaWJjLzU5NzNDMDY4NTY4MzY1RkZGNDBERURDRjFBMUNCNzU4MkI2MTE2QjczMUNEMzFBMTIyMzFBRTI1RTIwQjg3MUYSCgjhAxIFdW9zbW8SSAgHEkRpYmMvN0M0RDYwQUE5NUU1QTc1NThCMEEzNjQ4NjA5NzlDQTM0QjdGRjhBQUYyNTVCODdBRjlFODc5Mzc0NDcwQ0VDMBJICAgSRGliYy8yNzM5NEZCMDkyRDJFQ0NENTYxMjNDNzRGMzZFNEMxRjkyNjAwMUNFQURBOUNBOTdFQTYyMkIyNUY0MUU1RUIyGk8KRGliYy8yNzM5NEZCMDkyRDJFQ0NENTYxMjNDNzRGMzZFNEMxRjkyNjAwMUNFQURBOUNBOTdFQTYyMkIyNUY0MUU1RUIyEgcxMDAwMDAwIgcxMDAwMDAwEloKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQNutTEMkmT7rngHNX19j0uA2419X1nPhqlDkZ/cqAk2exIECgIIARjMig8SBBCAiXoaQIoIWm3CI9esFCLaeQF9Aj6bEjgm1WItBdDnHeye5DJgEBBbaoc8iQQ3oC1pCX+BtxZVP8NpTLCeW6O/pW84jds=",\n        ...\n        ...\n\n        "CqQDCqEDCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S8gIKK29zbW8xNng5cmhqeTZ0ZjJkNDJ2MzRucXBna3B1d2tzY2d2dG0yYTBndDISSAgKEkRpYmMvRTY5MzFGNzgwNTdGN0NDNURBMEZENkNFRjgyRkYzOTM3M0E2RTA0NTJCRjFGRDc2OTEwQjkzMjkyQ0YzNTZDMRIJCAkSBXVvc21vEkkI3AQSRGliYy85ODdDMTdCMTFBQkMyQjIwMDE5MTc4QUNFNjI5MjlGRTk4NDAyMDJDRTc5NDk4RTI5RkU4RTVDQjAyQjdDMEE0EkkI4wQSRGliYy8yNzM5NEZCMDkyRDJFQ0NENTYxMjNDNzRGMzZFNEMxRjkyNjAwMUNFQURBOUNBOTdFQTYyMkIyNUY0MUU1RUIyGk8KRGliYy8yNzM5NEZCMDkyRDJFQ0NENTYxMjNDNzRGMzZFNEMxRjkyNjAwMUNFQURBOUNBOTdFQTYyMkIyNUY0MUU1RUIyEgc0MDg5MzU0Igc0MDg5MzU0EloKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQMQpu8Flaqd04iiBIBzIIqj4QDB8Lvgf8aMsLlQeX33nBIECgIIARjV5AsSBBCAiXoaQBFa9dKWBzls4GjqeEukgDTNZ9UYoXEa7vLfD5dzJ+HHFkZKGLsTP9brRdSOlMuq0iF9EGvMnoInd7leRYMQEl0="\n      ]\n    },\n    "evidence": {\n      "evidence": null\n    },\n    "last_commit": {\n      "height": "2836989",\n      "round": 0,\n      "block_id": {\n        "hash": "10419816E363D36492987AA2FBC1F09653DB026B2A6787F01B69C98EA54ADAEF",\n        "parts": {\n          "total": 3,\n          "hash": "468EAE52F145F55319BD41B6A62629E2424CF53B91D7AE28BD7E2C07D9B2F7B3"\n        }\n      },\n      "signatures": [\n        {\n          "block_id_flag": 2,\n          "validator_address": "CB5A63B91E8F4EE8DB935942CBE25724636479E0",\n          "timestamp": "2022-01-17T17:14:01.597493021Z",\n          "signature": "/HG0b07XVaIDfBScZyT1tQ4iWvIvvvOeFAD58VvF46QMDh7F9ytxXlviso60bPmvrN/RXblgRB5G7XVEH0s9Cg=="\n        },\n        {\n          "block_id_flag": 2,\n          "validator_address": "16A169951A878247DBE258FDDC71638F6606D156",\n          "timestamp": "2022-01-17T17:14:01.679151429Z",\n          "signature": "cOh/DCVUfRMjhz5uEjmPUvr6YzM0rrjBSPYrcCIYExB+R2B/PmoctvE3HrYsXTTvPQOKEEGNpYf2Z9TaanyPDQ=="\n        },\n        ...\n        {\n          "block_id_flag": 2,\n          "validator_address": "A677203440E86562D6DD475D0C2CA555EC01F803",\n          "timestamp": "2022-01-17T17:14:01.620734893Z",\n          "signature": "zONA/uGCfiOaRpHTMkMCtsnwUqmo1NnjRdQketHTZq6iCNbiGM5lI4QmPZtyg3bmk0GMNZ1kW06p1jrdAojkCQ=="\n        }\n      ]\n    }\n  }\n}\n')),(0,o.kt)("p",null)),(0,o.kt)("p",null,"As the purpose of this document is to describe the transaction structure, rather than the block structure, we\nwill not spend too much time on the block structure."),(0,o.kt)("p",null,"Briefly, the important points are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block_id"),": contains the hash of the block"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block"),": the block data itself"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.header"),": important information about the block, especially:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.header.chain_id")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.header.height")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.header.last_block_id")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.data.txs"),": the transactions on which we will focus"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".block.last_commit"),": information about the last commit prior to this one")),(0,o.kt)("p",null,"The transactions themselves are in ",(0,o.kt)("inlineCode",{parentName:"p"},".block.data.txs"),". This is an array, each entry\nof which is an individual transaction."),(0,o.kt)("p",null,"The block we have chosen, 2836990, contains 64 transactions:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ osmosisd query block 2836990 | jq -r '.block.data.txs | length'\n64\n")),(0,o.kt)("p",null,"Each transaction is base64-encoded data. For example, the first two are:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"Cp0CCpoCCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S6wEKK29zbW8xZTBkbXpkeGRtcnd5ZjQ2bmNtNXNxY2xrZGFuM21hcTVrNWp2ZHgSSQjcBBJEaWJjLzk4N0MxN0IxMUFCQzJCMjAwMTkxNzhBQ0U2MjkyOUZFOTg0MDIwMkNFNzk0OThFMjlGRThFNUNCMDJCN0MwQTQSSQjjBBJEaWJjLzI3Mzk0RkIwOTJEMkVDQ0Q1NjEyM0M3NEYzNkU0QzFGOTI2MDAxQ0VBREE5Q0E5N0VBNjIyQjI1RjQxRTVFQjISCQgBEgV1b3NtbxoRCgV1b3NtbxIIMTUwMDAwMDAiCDE1MDAwMDAwEmYKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQI3Vc8hzNbQdpBrbHj8hELzzBskwVqQrad15VgsFn1RtBIECgIIARi+9AMSEAoKCgV1b3NtbxIBMBCAiXoaQD9uPzOcom2NJGzrHEkgytg585ybULi93PnLNKMsECGCNH5gH46Cmiv504ULlyMsTfiyYInMGo39jYIahbDcDLk=",\n"Cp0CCpoCCiovb3Ntb3Npcy5nYW1tLnYxYmV0YTEuTXNnU3dhcEV4YWN0QW1vdW50SW4S6wEKK29zbW8xbDR1NTZsN2N2eDhuMG42Yzd3NjUwazAydno2N3F1ZGpsY3V0ODkSSQjcBBJEaWJjLzk4N0MxN0IxMUFCQzJCMjAwMTkxNzhBQ0U2MjkyOUZFOTg0MDIwMkNFNzk0OThFMjlGRThFNUNCMDJCN0MwQTQSSQjjBBJEaWJjLzI3Mzk0RkIwOTJEMkVDQ0Q1NjEyM0M3NEYzNkU0QzFGOTI2MDAxQ0VBREE5Q0E5N0VBNjIyQjI1RjQxRTVFQjISCQgBEgV1b3NtbxoRCgV1b3NtbxIIMTUwMDAwMDAiCDE1MDAwMDAwEmYKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQK1cR2MtFWdtiyO/qORycJYvhuEqF1W9howno2FFP/11xIECgIIARjM8wMSEAoKCgV1b3NtbxIBMBCAiXoaQHCrHmPW89D7BdROgVeDs0Uz4jz95MW/abhLOrsOT/fdS6UQ+Qvzj+htQe7TtKYGRfuK9UsyjcV6gIN7I8K0fbQ=",\n')),(0,o.kt)("p",null,"We can decode these by passing them through a base64 decoder. The correct arguments depend on your\nplatform, but generally are of the form ",(0,o.kt)("inlineCode",{parentName:"p"},"base64 -D"),". We do ",(0,o.kt)("strong",{parentName:"p"},"not")," recommend simply passing them through\nto the terminal, as this is binary-encoded data, specifically ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/protocol-buffers"},"protobufs"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query block 2836990 | jq '.block.data.txs[0]' | base64 -D > outfile\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"outfile")," will contain raw protobuf data.\nProtobuf data does not contain its own structure with it. It requires the ",(0,o.kt)("inlineCode",{parentName:"p"},".proto")," file to understand\nand interpret the fields, including converting them to a readable json format."),(0,o.kt)("p",null,"Fortunately, ",(0,o.kt)("inlineCode",{parentName:"p"},"osmosisd"),' provides some basic tools for querying individual transactions. It does not,\nhowever, let you retrieve any arbitrary transaction, as you must pass it "events":'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query txs --events '<type>.<key>=<value>' [--height <height>]\n")),(0,o.kt)("p",null,"If you already know the events, you can retrieve individual transactions.\nFortunately, if you are dealing with an individual block, you can get the transactions - and have ",(0,o.kt)("inlineCode",{parentName:"p"},"osmosisd"),"\ndecode the protobufs for you - by making the event be the block height:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query txs --height 2836990 --events 'tx.height=2836990' -o json\n")),(0,o.kt)("p",null,"The results should match the number of transactions we have in the block:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "total_count": "64",\n  "count": "30",\n  "page_number": "1",\n  "page_total": "3",\n  "limit": "30",\n  "txs": [\n      ...\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"total_count")," is 64, as we expected. ",(0,o.kt)("inlineCode",{parentName:"p"},"osmosisd query txs")," is paginated, so it only returned the first 30 of 64,\nwith this being page 1."),(0,o.kt)("p",null,"By passing the total transactions to retrieve, we can avoid the pagination:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query txs --height 2836990 --events 'tx.height=2836990' -o json --limit 64\n")),(0,o.kt)("p",null,"For convenience, we also will pass it through ",(0,o.kt)("inlineCode",{parentName:"p"},"jq")," for formatting, and save the results to a file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"osmosisd query txs --height 2836990 --events 'tx.height=2836990' -o json --limit 64 | jq '.' > outfile.json\n")),(0,o.kt)("p",null,"The entire block's transactions is available at ",(0,o.kt)("a",{parentName:"p",href:"/osmosis-core/guides/structure/txs-block-2836990"},"txs-block-2836990.json"),"."),(0,o.kt)("p",null,"We now have the ability to look at transactions:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"# to see all transactions\ncat outfile.json | jq '.txs'\n# to see an individual transaction\ncat outfile.json | jq '.txs[1]'\n")),(0,o.kt)("p",null,"Below is part of the transaction at index 1 of the above block."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"transaction 1"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "height": "2836990",\n  "txhash": "5BBC27779EA33FC99C319D74CFE730DC2A3102277D75410E75F2F9F5ED259BFE",\n  "codespace": "",\n  "code": 0,\n  "data": "0A2C0A2A2F6F736D6F7369732E67616D6D2E763162657461312E4D7367537761704578616374416D6F756E74496E",\n  "raw_log": "<raw data>",\n  "logs": [\n    {\n      "msg_index": 0,\n      "log": "",\n      "events": [\n        {\n          "type": "coin_received",\n          "attributes": [\n            {\n              "key": "receiver",\n              "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n            },\n            {\n              "key": "amount",\n              "value": "15000000uosmo"\n            },\n            {\n              "key": "receiver",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "amount",\n              "value": "289236271ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            ...\n          ]\n        },\n        {\n          "type": "coin_spent",\n          "attributes": [\n            {\n              "key": "spender",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "amount",\n              "value": "15000000uosmo"\n            },\n            {\n              "key": "spender",\n              "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n            },\n            {\n              "key": "amount",\n              "value": "289236271ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            ...\n          ]\n        },\n        {\n          "type": "message",\n          "attributes": [\n            {\n              "key": "action",\n              "value": "/osmosis.gamm.v1beta1.MsgSwapExactAmountIn"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n            },\n            ...\n          ]\n        },\n        {\n          "type": "token_swapped",\n          "attributes": [\n            {\n              "key": "module",\n              "value": "gamm"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "pool_id",\n              "value": "604"\n            },\n            {\n              "key": "tokens_in",\n              "value": "15000000uosmo"\n            },\n            {\n              "key": "tokens_out",\n              "value": "289236271ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            {\n              "key": "module",\n              "value": "gamm"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "pool_id",\n              "value": "611"\n            },\n            {\n              "key": "tokens_in",\n              "value": "289236271ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            {\n              "key": "tokens_out",\n              "value": "3802225ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2"\n            },\n            ...\n          ]\n        },\n        {\n          "type": "transfer",\n          "attributes": [\n            {\n              "key": "recipient",\n              "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "amount",\n              "value": "15000000uosmo"\n            },\n            {\n              "key": "recipient",\n              "value": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89"\n            },\n            {\n              "key": "sender",\n              "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n            },\n            {\n              "key": "amount",\n              "value": "289236271ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            ...\n          ]\n        }\n      ]\n    }\n  ],\n  "info": "",\n  "gas_wanted": "2000000",\n  "gas_used": "183726",\n  "tx": {\n    "@type": "/cosmos.tx.v1beta1.Tx",\n    "body": {\n      "messages": [\n        {\n          "@type": "/osmosis.gamm.v1beta1.MsgSwapExactAmountIn",\n          "sender": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89",\n          "routes": [\n            {\n              "poolId": "604",\n              "tokenOutDenom": "ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            {\n              "poolId": "611",\n              "tokenOutDenom": "ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2"\n            },\n            {\n              "poolId": "1",\n              "tokenOutDenom": "uosmo"\n            }\n          ],\n          "tokenIn": {\n            "denom": "uosmo",\n            "amount": "15000000"\n          },\n          "tokenOutMinAmount": "15000000"\n        }\n      ],\n      "memo": "",\n      "timeout_height": "0",\n      "extension_options": [],\n      "non_critical_extension_options": []\n    },\n    "auth_info": {\n      "signer_infos": [\n        {\n          "public_key": {\n            "@type": "/cosmos.crypto.secp256k1.PubKey",\n            "key": "ArVxHYy0VZ22LI7+o5HJwli+G4SoXVb2GjCejYUU//XX"\n          },\n          "mode_info": {\n            "single": {\n              "mode": "SIGN_MODE_DIRECT"\n            }\n          },\n          "sequence": "63948"\n        }\n      ],\n      "fee": {\n        "amount": [\n          {\n            "denom": "uosmo",\n            "amount": "0"\n          }\n        ],\n        "gas_limit": "2000000",\n        "payer": "",\n        "granter": ""\n      }\n    },\n    "signatures": [\n      "cKseY9bz0PsF1E6BV4OzRTPiPP3kxb9puEs6uw5P991LpRD5C/OP6G1B7tO0pgZF+4r1SzKNxXqAg3sjwrR9tA=="\n    ]\n  },\n  "timestamp": "2022-01-17T17:14:01Z"\n}\n'))),(0,o.kt)("p",null,"Each transaction has an identical structure. The differences are in the details inside each structure:"),(0,o.kt)("details",null,(0,o.kt)("summary",null,"transaction 2"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "height": "2836990",\n  "txhash": "5BBC27779EA33FC99C319D74CFE730DC2A3102277D75410E75F2F9F5ED259BFE",\n  "codespace": "",\n  "code": 0,\n  "data": "0A2C0A2A2F6F736D6F7369732E67616D6D2E763162657461312E4D7367537761704578616374416D6F756E74496E",\n  "raw_log": "<raw data>",\n  "logs": [\n    {\n      "msg_index": 0,\n      "log": "",\n      "events": [\n        { ... },\n        { ... },\n        ...\n      ]\n    }\n  ],\n  "info": "",\n  "gas_wanted": "2000000",\n  "gas_used": "183726",\n  "tx": {\n    "@type": "/cosmos.tx.v1beta1.Tx",\n    "body": {\n      "messages": [\n        {\n          "@type": "/osmosis.gamm.v1beta1.MsgSwapExactAmountIn",\n          "sender": "osmo1l4u56l7cvx8n0n6c7w650k02vz67qudjlcut89",\n          "routes": [\n            {\n              "poolId": "604",\n              "tokenOutDenom": "ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"\n            },\n            {\n              "poolId": "611",\n              "tokenOutDenom": "ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2"\n            },\n            {\n              "poolId": "1",\n              "tokenOutDenom": "uosmo"\n            }\n          ],\n          "tokenIn": {\n            "denom": "uosmo",\n            "amount": "15000000"\n          },\n          "tokenOutMinAmount": "15000000"\n        }\n      ],\n      "memo": "",\n      "timeout_height": "0",\n      "extension_options": [],\n      "non_critical_extension_options": []\n    },\n    "auth_info": {\n      "signer_infos": [\n        {\n          "public_key": {\n            "@type": "/cosmos.crypto.secp256k1.PubKey",\n            "key": "ArVxHYy0VZ22LI7+o5HJwli+G4SoXVb2GjCejYUU//XX"\n          },\n          "mode_info": {\n            "single": {\n              "mode": "SIGN_MODE_DIRECT"\n            }\n          },\n          "sequence": "63948"\n        }\n      ],\n      "fee": {\n        "amount": [\n          {\n            "denom": "uosmo",\n            "amount": "0"\n          }\n        ],\n        "gas_limit": "2000000",\n        "payer": "",\n        "granter": ""\n      }\n    },\n    "signatures": []\n  },\n  "timestamp": "2022-01-17T17:14:01Z"\n}\n'))),(0,o.kt)("p",null,"Each transaction is structured of the following key elements. The more complex ones will be described in detail below."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"height"),": height of the block in which the transaction is included"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"txhash"),": hash of the transaction, obviously excluding the ",(0,o.kt)("inlineCode",{parentName:"li"},"txhash")," itself"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"raw_log"),": raw data of the messages; compressed, original format of all of the content of ",(0,o.kt)("inlineCode",{parentName:"li"},".logs")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"logs"),": array of individual log messages that make up the contents of the transaction; details below"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"gas_wanted"),": how much gas the transaction sender allowed"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"gas_used"),": how much gas actually was used"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tx"),": the originally sent transaction, from the sender; this, in turn, triggered the various messages that comprise the transaction; will be described in detail below"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timestamp"),": timestamp of the original transaction")),(0,o.kt)("p",null,"Let's explore the parts that require more detail. In addition, for practical examples,\nwe will link to individual analyses of several transactions."),(0,o.kt)("h2",{id:"tx"},"tx"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"tx")," field contains the original transaction that was sent to the blockchain that triggered the\nrest of the messages."),(0,o.kt)("p",null,"This ",(0,o.kt)("inlineCode",{parentName:"p"},"tx")," could be something simple - transfer 10osmo from account A to account B - or something more\ncomplex, like swapping tokens via a liquidity pool or bonding."),(0,o.kt)("p",null,"When you use the ",(0,o.kt)("a",{parentName:"p",href:"https://app.osmosis.zone/"},"Osmosis Web App")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"osmosisd")," to send a transaction, it\ncomposes and sends the single message in the ",(0,o.kt)("inlineCode",{parentName:"p"},"tx")," field."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"@type": "/cosmos.tx.v1beta1.Tx",\n"body": {\n  "messages": [\n    {\n      "@type": "<transaction type>",\n      "sender": "<sender account>",\n      ...\n      // fields that are unique to the transaction type\n    }\n  ],\n  "memo": "",\n  "timeout_height": "0",\n  "extension_options": [],\n  "non_critical_extension_options": []\n},\n"auth_info": {\n  "signer_infos": [\n    {\n      "public_key": {\n        "@type": "/cosmos.crypto.secp256k1.PubKey",\n        "key": "ArVxHYy0VZ22LI7+o5HJwli+G4SoXVb2GjCejYUU//XX"\n      },\n      "mode_info": {\n        "single": {\n          "mode": "SIGN_MODE_DIRECT"\n        }\n      },\n      "sequence": "63948"\n    }\n  ],\n  "fee": {\n    "amount": [\n      {\n        "denom": "uosmo",\n        "amount": "0"\n      }\n    ],\n    "gas_limit": "2000000",\n    "payer": "",\n    "granter": ""\n  }\n},\n"signatures": []\n')),(0,o.kt)("p",null,"Exploring the fields:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@type"),": the base transaction type. In our block, every single one of the transactions has the same base type, ",(0,o.kt)("inlineCode",{parentName:"li"},"/cosmos.tx.v1beta1.Tx"),". This is defined by the cosmos SDK."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"body"),": the core body of the transaction."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"auth_info"),": who signed this message when it was sent to the chain?")),(0,o.kt)("h3",{id:"signer"},"signer"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"auth_info")," field contains the signer. This normally will be signed by a Cosmos public key\nsignified by ",(0,o.kt)("inlineCode",{parentName:"p"},"auth_info.signer_infos[0].public_key.@type"),", while the ",(0,o.kt)("inlineCode",{parentName:"p"},".key")," field will give the public key."),(0,o.kt)("p",null,"This public key should match the sender of the messages in the ",(0,o.kt)("inlineCode",{parentName:"p"},"body"),", and is checked by the chain upon submission."),(0,o.kt)("h3",{id:"body"},"body"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"body")," contains the original transaction. It contains one or more ",(0,o.kt)("inlineCode",{parentName:"p"},"messages"),", all of which must succeed\nfor the transaction to succeed, i.e. a transaction. Most of the transactions are likely to have a single message, but more can exist."),(0,o.kt)("p",null,"The fields of message always will contain at least two fields:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@type"),": the specific type of the message within the application, for example, ",(0,o.kt)("inlineCode",{parentName:"li"},"/osmosis.gamm.v1beta1.MsgSwapEactAmountIn")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"sender"),": the sender of the message")),(0,o.kt)("p",null,"The rest of the fields are specific to the ",(0,o.kt)("inlineCode",{parentName:"p"},"@type")," of message. Once you know the type of message, you can look in the\nsource code for the protobuf definition of the message type."),(0,o.kt)("p",null,"Each Cosmos SDK app implementation will have its own modules and therefore its own message types,\nin addition to basic ones inherited from the Cosmos SDK."),(0,o.kt)("p",null,"When the Cosmos app, in this example osmosisd, and specifically the target module, in our example ",(0,o.kt)("inlineCode",{parentName:"p"},"gamm"),", receives the message, it in turn\ndoes internal activities, including\nsending various messages that comprise the fulfillment of the requested transaction. These are recorded in the ",(0,o.kt)("inlineCode",{parentName:"p"},"logs"),"."),(0,o.kt)("h3",{id:"logs"},"logs"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"logs")," represent the various emitted messages that describe the internal components of fulfillment of the requested transaction."),(0,o.kt)("p",null,"There can be 0, 1 or multiple entries in the ",(0,o.kt)("inlineCode",{parentName:"p"},"logs")," field."),(0,o.kt)("p",null,"Each message in ",(0,o.kt)("inlineCode",{parentName:"p"},"logs")," has just 3 properties:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"msg_index"),": increments from 0 for messages within the transaction; if there are multiple messages, each will have an incremented ",(0,o.kt)("inlineCode",{parentName:"li"},"msg_index"),", although the 0th index may be optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"log"),": often blank"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"events"),": events emitted by the application")),(0,o.kt)("p",null,"Each entry in ",(0,o.kt)("inlineCode",{parentName:"p"},"events")," has just two properties:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"type"),": the type of event, which has meaning solely to the application"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"attributes"),": an array of key-value structures")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"type")," is a simple string, which has meaning only in the context of the application, for example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"type": "coin_received",\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"attributes")," are an array of key-value structures, with just two keys: ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"value"),". For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "key": "receiver",\n  "value": "osmo1thscstwxp87g0ygh7le3h92f9ff4sel9y9d2eysa25p43yf43rysk7jp93"\n},\n')),(0,o.kt)("p",null,"Since the attributes are an array of objects with two properties - ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"value")," - applications may use\nseveral of them in series to complete a message. Check out the analyzed transactions below for a better understanding."),(0,o.kt)("p",null,"Sample transactions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/osmosis-core/guides/structure/arb"},"Arbitrage SwapIn"))))}p.isMDXComponent=!0}}]);